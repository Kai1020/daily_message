{% extends "base.html" %}
{% block title %}Today's Note{% endblock %}
{% block content %}
  <div class="card" aria-live="polite" id="dailyCard">
    <h1>Good morning, Shahad ðŸŒ¸</h1>
    <p class="lead">A small note just for you â€” for today.</p>

    <div id="messageWrap" style="margin-top:16px;padding:22px;border-radius:14px;background:linear-gradient(180deg,#fff,#fff8fb);font-size:18px;color:#5b2b2b;opacity:0;transform:translateY(8px);transition:all .6s ease;">
      {{ message }}
    </div>

    <div style="margin-top:14px;color:#6b3b3b;">
      <div>Next surprise in</div>
      <div id="countdown" style="font-weight:700;margin-top:6px;font-size:16px">Calculatingâ€¦</div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script>
  // fade-in the message
  window.addEventListener("DOMContentLoaded", () => {
    const m = document.getElementById("messageWrap");
    setTimeout(()=>{ m.style.opacity = "1"; m.style.transform = "translateY(0)"; }, 200);
  });

  // countdown to next local midnight
  function updateCountdown(){
    const now = new Date();
    // next midnight local:
    const next = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
    let diff = next - now; // milliseconds

    if (diff < 0) diff = 0;
    const s = Math.floor(diff / 1000) % 60;
    const m = Math.floor(diff / (1000*60)) % 60;
    const h = Math.floor(diff / (1000*60*60));
    document.getElementById("countdown").textContent = `${String(h).padStart(2,'0')}h ${String(m).padStart(2,'0')}m ${String(s).padStart(2,'0')}s`;
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);
</script>
{% endblock %}
